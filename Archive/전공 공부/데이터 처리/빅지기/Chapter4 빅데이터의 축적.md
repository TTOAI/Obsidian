
## 4-1 벌크 형과 스트리밍 형의 데이터 수집

- 시계열 데이터는 분산 스토리지에 그대로 저장할 시 대량의 작은 파일을 생성하므로 적당히 모아서 하나의 큰 파일로 만들어 효율을 높임
- 벌크형 데이터 전송 + 워크플로 관리 도구
- 벌크형 데이터 전송
	- SQL, REST API 등으로 데이터 가져옴
	- ETL 서버를 거쳐 분산 스토리지에 저장
- 스트리밍형 데이터 전송
	- 메시지 큐, 메시지 브로커 등을 통해 분산 스토리지와 중계
	- 기록된 데이터를 일정한 간격으로 꺼내고 모아서 함께 분산 스토리지에 저장
	- 메시지 브로거로서 Fluentd의 사용 고려

## 4-2 메시지 배송의 트레이드 오프

- 대량의 데이터를 안정적으로 전송하기 위해 중간층 필요
	- 메시지 브로커
		- ex. 카프카, 아마존 키테니스
- 메시지 배송의 신뢰성 확보
	- 재전송에 따른 데이터 중복 문제
	- 코디네이터의 존재
		- 코디네이터의 부재의 경우를 위한 합의(consensus)
			- 분산 시스템 설계에 있어 어려운 문제 중 하나
	- 중복 제거

## 4-3 시계열 데이터의 최적화

- 분산 스토리지에서는 프로세스 시간을 사용하여 데이터를 저장
- 시계열 인덱스로 효율적인 이벤트 시간 취급 가능
- 조건절 푸쉬다운으로 이벤트 시간 순 정렬
- 데이터 수집 단계에서는 프로세스 시간만을 사용, 데이터 마트를 만드는 단계에서 이벤트 시간에 의한 정렬을 함께 하도록 함

## 4-3 비구조화 데이터의 분산 스토리지

- NoSQL 데이터베이스 -> 특정 용도에 최적화된 데이터 장소
- 분산 KVS
	- DynamoDB
- 와이드 칼럼 스토어
	- Cassandra
- 도큐먼트 스토어
	- MongoDB
- 검색 엔진
	- 역 색인을 만듦
	- 데이터를 찾는 것에 특화
	- ElasticSearch
	- Splunk
