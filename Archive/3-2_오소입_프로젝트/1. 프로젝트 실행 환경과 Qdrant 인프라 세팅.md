# ğŸš€ 1ë‹¨ê³„ ëª©í‘œ

âœ” Qdrant ë²¡í„°DBë¥¼ Dockerë¡œ ì‹¤í–‰  
âœ” FastAPI ê¸°ë³¸ ì„œë²„ ì»¨í…Œì´ë„ˆ ì‹¤í–‰  
âœ” ë‘ ì»¨í…Œì´ë„ˆê°€ ì„œë¡œ í†µì‹  ê°€ëŠ¥í•œ í™˜ê²½ êµ¬ì¶•  
âœ” ë¸Œë¼ìš°ì €ì—ì„œ ì •ìƒ ì‘ë™ í™•ì¸

ì´ 4ê°€ì§€ë¥¼ ë‹¬ì„±í•˜ë©´ 1ë‹¨ê³„ ì™„ë£Œ!

---

# ğŸ§© 1ë‹¨ê³„ì—ì„œ ë§Œë“¤ íŒŒì¼ ëª©ë¡(ë‹¨ 4ê°œ)

```
/project-root
 â”œâ”€ docker-compose.yml
 â””â”€ backend/
      â”œâ”€ Dockerfile
      â”œâ”€ requirements.txt
      â””â”€ main.py
```

ì§€ê¸ˆë¶€í„° í•˜ë‚˜ì”© ë§Œë“¤ì–´ë³´ì.

---

# â­ Step 0 â€” í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë” ë§Œë“¤ê¸°

í„°ë¯¸ë„ì„ ì—´ê³  ì›í•˜ëŠ” ê²½ë¡œì—ì„œ:

```bash
mkdir rag-qdrant-project
cd rag-qdrant-project
```

---

# â­ Step 1 â€” docker-compose.yml ìƒì„±

(í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— ìƒì„±)

ì•„ë˜ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ ë„£ì–´:

```yaml
version: "3.8"

services:
  qdrant:
    image: qdrant/qdrant:latest
    container_name: qdrant
    ports:
      - "6333:6333"
    volumes:
      - qdrant_storage:/qdrant/storage

  backend:
    build: ./backend
    container_name: rag-backend
    ports:
      - "8000:8000"
    environment:
      - QDRANT_URL=http://qdrant:6333
    depends_on:
      - qdrant

volumes:
  qdrant_storage:
```

### âœ” ì´ íŒŒì¼ì´ í•˜ëŠ” ì—­í• 

- qdrant ì„œë¹„ìŠ¤ ì‹¤í–‰ (6333 í¬íŠ¸)
- backend(FastAPI) ì„œë¹„ìŠ¤ ì‹¤í–‰ (8000 í¬íŠ¸)
- backend â†’ qdrant í†µì‹  ìë™ ì„¤ì •
- ë°ì´í„° ìœ ì§€(volumes)

---

# â­ Step 2 â€” backend í´ë” ìƒì„±

```bash
mkdir backend
cd backend
```

---

# â­ Step 3 â€” requirements.txt ìƒì„±

(backend í´ë” ì•ˆ)

```txt
fastapi
uvicorn
qdrant-client
python-dotenv
openai
```

ì´í›„ embeddingì´ë‚˜ PDF íŒŒì‹± ê¸°ëŠ¥ì„ ì¶”ê°€í•  ë•Œ ì—¬ê¸°ì— ë” ë„£ìœ¼ë©´ ë¨.

---

# â­ Step 4 â€” Dockerfile ë§Œë“¤ê¸°

(backend í´ë” ì•ˆ)

```dockerfile
FROM python:3.10-slim

WORKDIR /app

COPY requirements.txt .

RUN pip install --no-cache-dir -r requirements.txt

COPY . .

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### âœ” Dockerfile ì—­í• 

- python ê¸°ë°˜ ì´ë¯¸ì§€ ìƒì„±
- í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
- FastAPI ì„œë²„ ì‹¤í–‰

---

# â­ Step 5 â€” main.py ë§Œë“¤ê¸°

(backend í´ë” ì•ˆ)

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def health_check():
    return {"status": "ok", "message": "RAG backend running"}
```

ì´ íŒŒì¼ í•˜ë‚˜ë§Œ ìˆì–´ë„ FastAPI ì„œë²„ê°€ ì •ìƒ ì‹¤í–‰ë¨.

---

# â­ Step 6 â€” í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¡œ ëŒì•„ê°€ê¸°

```bash
cd ..
```

---

# â­ Step 7 â€” ì»¨í…Œì´ë„ˆ ë¹Œë“œ & ì‹¤í–‰

```bash
docker compose up --build -d
```

### ì‹¤í–‰ë˜ë©´ ë‹¤ìŒ ë©”ì„¸ì§€ê°€ ë‚˜ì™€ì•¼ ì •ìƒ:

```
Creating qdrant ...
Creating rag-backend ...
```

ìƒíƒœ í™•ì¸:

```bash
docker ps
```

---

# â­ Step 8 â€” ì‘ë™ í™•ì¸ (í•„ìˆ˜)

## ğŸ”¹ 1) FastAPI ì„œë²„ ì²´í¬

ë¸Œë¼ìš°ì €ì—ì„œ:

ğŸ‘‰ [http://localhost:8000/](http://localhost:8000/)

ì •ìƒ ì‘ë‹µ:

```json
{
  "status": "ok",
  "message": "RAG backend running"
}
```

---

## ğŸ”¹ 2) Qdrant ì„œë²„ ì²´í¬

ë¸Œë¼ìš°ì €ì—ì„œ:

ğŸ‘‰ [http://localhost:6333/collections](http://localhost:6333/collections)

ì •ìƒ ì‘ë‹µ(ì»¬ë ‰ì…˜ ì—†ì„ ì‹œ):

```json
{
  "result": [],
  "time": 0.0001,
  "status": "ok"
}
```

ê·¸ëŸ¬ë©´ Qdrantë„ ì •ìƒ ì‘ë™ ì¤‘.

---

# â­ Step 9 â€” backend ì»¨í…Œì´ë„ˆì—ì„œ qdrant ì—°ê²° í…ŒìŠ¤íŠ¸(ì„ íƒ)

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†:

```bash
docker exec -it rag-backend bash
```

íŒŒì´ì¬ ì‹¤í–‰:

```bash
python
```

ì…ë ¥:

```python
from qdrant_client import QdrantClient
client = QdrantClient(url="http://qdrant:6333")
client.get_collections()
```

ì •ìƒ ì¶œë ¥:

```python
{'collections': []}
```

ê·¸ëŸ¬ë©´ **backend â†’ Qdrant ì—°ê²° ì„±ê³µ!**

---

# ğŸ‰ 1ë‹¨ê³„ ì™„ë£Œ ê¸°ì¤€

|ì²´í¬ í•­ëª©|ì„±ê³µ ì—¬ë¶€|
|---|---|
|docker compose up ì‹¤í–‰ ì„±ê³µ|âœ”|
|localhost:6333ì—ì„œ Qdrant ì‘ë‹µ|âœ”|
|localhost:8000ì—ì„œ FastAPI ì‘ë‹µ|âœ”|
|backend ì»¨í…Œì´ë„ˆì—ì„œ Qdrant ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ|âœ”|

ì´ ë„¤ ê°œê°€ ëª¨ë‘ OKë©´ 1ë‹¨ê³„ëŠ” ì™„ë²½í•˜ê²Œ ëë‚¬ë‹¤.

---

### Python ì¸í„°í”„ë¦¬í„° ë° ì»¨í…Œì´ë„ˆ ì…¸ ì¢…ë£Œ
```shell
exit()
exit
```
