## 3-1 대규모 분산 처리의 프레임워크

- 구조화된 데이터: 스키마가 명확하게 정의된 데이터
- 비구조화 데이터: 스키마가 없는 데이터
- 데이터 레이크:
	- 비구조화 데이터를 분산 스토리지에 저장, 분산 시스템에서 처리
	- 이 과정에서 스키마를 정의하고 구조화된 데이터로 변환 -> 분석 가능

- 스키마리스 데이터: 
	- 서식은 정해져 있지만, 칼럼 수나 데이터형은 명확하지 않은 데이터
	- JSON 형식 그대로 저장 후 데이터 분석에 필요한 필드만을 추출
	- ex) CSV, JSON, XML

---
- 데이터 구조화의 파이프라인:
	1. 애플리케이션 (데이터 소스)
	2. 분산 스토리지 (비구조화 데이터 / 스키마리스 데이터)
	3. 열 지향 스토리지 (구조화 데이터)
		- MPP 데이터베이스로 전송
		- Hadoop 상에서 열 지향 스토리지 형식으로 변환
		- SQL로 집계 가능

- 구조화 데이터
	- 팩트 테이블: 시간에 따라 증가하는 데이터
	- 디멘전 테이블: 그에 따른 부속 데이터
---
- Hadoop에서 사용할 수 있는 열 지향 스토리지
	- Apache ORC:
		- 구조화 데이터를 위한 열 지향 스토리지
		- 처음에 스키마를 정한 후 데이터를 저장
	- Apache Parquet:
		- 스키마리스에 가까운 데이터 구조
		- JSON 같은 데이터도 그대로 저장 가능

- 비구조화 데이터를 읽어 들여 열 지향 스토리지로 변환 ->Hadoop, Spark 등의 분산 처리 프레임워크 사용
---
- Hadoop의 기본 구성 요소
	- HDFS: 분산 파일 시스템
	- YARN: 리소스 관리자
	- MapReduce: 분산 데이터 처리

- 분산 시스템을 Hadoop, Spark를 비롯한 여러 소프트웨어를 조합하여 구성할 수 있음

- HDFS: 
	- 네트워크에 연결된 파일 서버
	- 다수의 컴퓨터에 파일 복사, 중복성 높임

- YARN:
	- CPU 코어와 메모리를 컨테이너 단위로 관리
	- 리소스 여유가 있는 호스트부터 컨테이너 할당
	- 애플리케이션마다 실행의 우선순위를 결정
	- 애플리케이션 수준의 기술(어떤 호스트에서 어떤 프로세스 실행) -> Docker과 다른 점

- MapReduce(MR):
	- YARN 상에서 동작하는 분산 애플리케이션 중 하나
	- 데이터 처리 실행
	- 자바 프로그램 실행 -> 비구조화 데이터 가공 적합
	- 오버헤드가 크므로 대량 데이터 배치 처리에 적합
---
- Apache Hive:
	- 쿼리 엔진 중 하나
	- SQL 등의 쿼리 언어에 의한 데이터 집계 목적
	- 쿼리를 자동으로 MapReduce 프로그램으로 변환
	- Hive를 계승하였으므로 애드 혹 쿼리를 여러 번 실행하는 데는 부적합

- Hive on Tez:
	- Hive의 연장선
	- MapReduce를 대체할 목적으로 개발
	- MapReduce 단점 해소하여 고속화 실현
	- 스테이지의 종료를 기다리지 않고 데이터를 후속 처리에 전달
---
- 대화형 쿼리 엔진
	- Hive의 고속화보다 처음부터 대화형의 쿼리 실행만 전문으로 함
	- ex) Apache Impala, Presto
	- MapReduce, Tez -> 장시간의 배치 처리 가정, 한정된 리소스의 유효한 활용에 초점
	- 대화형 쿼리 엔진 -> 순간 최대 속도를 높이기 위해 모든 오버헤드 제거, 사용 가능 리소스 최대 활용

- Apache Impala:
	- YARN과 같은 범용적인 리소스 관리자 사용 X
	- MPP 데이터베이스처럼 멀티 코어 활용, 가능한 한 많은 데이터 처리 병렬화

- SQL-on-Hadoop
	- Hadoop에서 쓰이는 다수의 쿼리 엔진 총칭
---
- Spark
	- Hadoop과 독립된 프로젝트
	- 대량의 메모리를 활용하여 고속화 실현
	- Hadoop이 아닌 MapReduce를 대체하는 존재
	- 실행은 자바 런타임, 데이터 처리는 스크립트 언어
	- Spark SQL: SQL로 쿼리 실행
	- Spark Streaming: 스트림 처리 수행

## 3-2 쿼리 엔진

- Hive에 의한 구조화 데이터의 생성
- Presto에 의한 대화식 쿼리

- Hive + Presto 데이터 파이프라인
- 1.
	- 분산 스토리지에 저장된 데이터 구조화, 열 지향 스토리지 형식으로 저장
	- Hive 이용
	- Hive 메타 스토어: 각 테이블의 정보를 저장
- 2.
	- 구조화 데이터 결합, 집계
	- 비정규화 테이블로 데이터 마트에 써서 내보냄
	- 열 지향 스토리지를 이용한 쿼리 실행에 Presto 사용
---
- SQL-on-Hadoop의 쿼리 엔진: 데이터를 내부로 가져오지 않아도 텍스트 파일을 그대로 집계 가능
- 