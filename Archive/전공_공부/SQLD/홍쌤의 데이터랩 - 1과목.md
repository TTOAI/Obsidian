
# 데이터모델의 이해
- 모델링 특징: 단순화, 추상화, 명확화
- 모델링 유의점: 중복, 비유연성, 비일관성
- 모델링 요소: 대상, 속성, 관계

- 모델링 3단계
	- 개념적
		- 핵심 엔터티 추출
		- ERD 작성
	- 논리적
		- 세부속성, 식별자, 관계 표현
		- 데이터 정규화 수행
	- 물리적

# 엔터티
- 엔터티 분류 (유형, 무형)
	- 유형엔터티
		- ex. 사원, 물품
	- 개념엔터티
		- ex. 조직, 보험상품
	- 사건엔터티
		- ex. 주문, 청구, 미납

- 엔터티 분류 (발생 시점)
	- 기본엔터티
		- 원래 존재
		- 고유한 주식별자를 가짐
		- ex. 사원
	- 중심엔터티
		- 기본엔터티로부터 발생
		- 많은 데이터
		- ex. 계약, 청구, 주문
	- 행위엔터티
		- 2개 이상의 부모엔터티로부터 발생
		- 자주 내용이 바뀌거나 데이터 양 증가
		- ex. 주문(고객 + 상품 엔터티)

- 엔터티와 인스턴스 표기
	- IE 표기법
	- Barker 표기법

# 속성
- 속성의 특징
	- 정해진 주식별자에 함수적 종속성을 가짐
		- 완전 함수적 종속
			- PK 구성 컬럼이 2개 이상일 때 PK값 모두에 의한 종속관계
		- 부분 함수적 종속
			- PK 일부에 대한 종속관계

- 속성 분류 (특성)
	- 기본 속성
		- 업무로부터 추출된 모든 속성
		- ex. 원금
	- 설계 속성
		- 업무 규칙화, 기본 속성 변형
		- ex. 상품코드
	- 파생 속성
		- 다른 속성에 의해 만들어짐
		- ex. 합계

- 속성 분류 (엔터티 구성방식)
	- PK
	- FK
	- 일반 속성

- 속성 분류 (분해 여부)
	- 단일 속성
		- 하나의 의미
		- ex. 회원 ID
	- 복합 속성
		- 여러 개의 의미
		- ex. 주소
	- 다중값 속성
		- 여러 개의 값
		- ex. 상품 리스트, 전화번호

# 관계
- 관계의 종류
	- 존재적 관계
		- ex. 부서 엔터티가 삭제되면 사원 엔터티에 영향
	- 행위적 관계
		- ex. 고객 엔터티의 행동에 의해 주문 엔터티 발생

- 관계의 차수
	- M 대 N 관계
		- 조인 시 카테시안 곱 발생
		  -> 연결엔터티 추가
		  -> 1 대 N 관계로 해소

- 관계의 페어링
	- 엔터티 안에 인스턴스의 개별적 관계
	- 두 엔터티 간의 특정 연결
	- ex. 학생A - 강의B - 2023년 1학기 수강 - 성적A+

# 식별자
- 엔터티를 대표할 수 있는 속성
- 논리 모델링 - 식별자, 물리 모델링 - 키(key)

- 주식별자 특징
	- 유일성
	- 최소성
	- 불변성
	- 존재성

- 식별자 분류 (대표성 여부)
	- 주식별자
	- 보조식별자

- 식별자 분류 (생성 여부)
	- 내부식별자
		- 시스템 내부에서만 사용
		- ex. 데이터베이스 고유 ID
	- 외부식별자
		- 외부에서도 이해 가능한 형식
		- ex. 회원번호, 주문번호

- 식별자 분류 (속성 수)
	- 단일식별자
	- 복합식별자

- 식별자 분류 (대체 여부)
	- 본질식별자
		- 업무에 의해 만들어짐
		- 꼭 필요함
		- ex. 부서코드
	- 인조식별자
		- 관리의 편의성 등을 이유로 인위적으로 만들어짐
		- 꼭 필요하지는 않음
		- 주로 기본키로 사용됨
		- 자동으로 증가하는 일련번호 같은 형태
		- ex. 주문번호 <- 주문일자 + 주문순서 + 상품코드
		- 단점
			- 불필요한 index 생성
			  -> 저장공간 낭비, DML 성능 저하
				- 인덱스는 원래 조회 성능을 향상시키기 위한 객체
				  -> 인덱스는 DML(INSERT/UPDATE/DELETE) 시 INDEX SPLIT 현상으로 인해 성능이 저하됨
			- 중복 데이터 발생 가능성
			  -> 데이터 품질 저하
		- ex. 주문상세 테이블 설계
			- PK: 주문번호 + 상품번호
				- 하나의 주문번호로 같은 상품의 주문 결과 저장 X
				- ex. 상품 주문 후 동일한 장바구니에 동일 상품 추가 주문
			- PK: 주문번호 + 주문순번
				- 매 주문마다 하나의 주문번호에 대한 상품의 주문 횟수를 세어야 함
			- PK: 주문상세번호 (인조식별자 생성)
				- 불필요한 index 생성
				- 나머지 정보들이 불필요하게 중복 저장될 가능성


- 관계 간 엔터티 구분
	- 강한 개체 - 약한 개체
	- ex. 고객 - 계좌, 부서 - 사원

- 식별 관계
	- 엔터티의 기본키 -> 다른 엔터티의 기본키의 하나
	- ERD에서 실선으로 표시

- 비식별관계
	- 강한 개체의 기본키 -> 다른 엔터티의 일반 속성

# 정규화
- 엔터티의 데이터를 분해하는 과정
- 데이터 중복 제거, 데이터 모델의 독립성 확보
- 이상현상을 줄임
- 엔터티를 상세화
  -> 논리 데이터 모델링 수행 시점에서 고려
- 제 1-5 정규화 존재, 실질적으로 제 3 정규화까지 수행

- 이상현상
	- 정규화를 하지 않아 발생하는 현상
	- 삽입이상
	- 갱신이상
	- 삭제이상

- 제 1 정규화
	- 컬럼이 원자성을 갖도록 테이블을 분해

- 제 2 정규화
	- 제 1 정규화 테이블에 대해 완전 함수 종속을 만들도록 테이블을 분해

- 제 3 정규화
	- 제 2 정규화 테이블에 대해 이행적 종속을 없애도록 테이블을 분리
	- 이행적 종속: A -> B, B -> C에 대해 A -> C가 성립
	- 결정자와 종속 관계
		- A 속성이 B 속성의 값을 결정
		  -> A는 B의 결정자
		  -> B는 A에 종속됨

- BCNF 정규화
	- 모든 결정자가 후보키가 되도록 테이블을 분해

- 제 4 정규화
	- 여러 컬럼들이 하나의 컬럼을 종속시키는 경우 분해하여 다중값 종속성을 제거

- 제 5 정규화
	- 조인에 의해서 종속성이 발생되는 경우 분해

- 반정규화
	- 데이터베이스의 성능 향상을 위해 데이터 중복을 허용하고 조인을 줄임
	- 조회 속도 향상
	- 데이터 모델의 유연성 낮아짐

# 관계와 조인의 이해
- 계층형 데이터 모델
	- 자기 자신끼리 관계가 발생
	- 하나의 엔터티 내의 인스턴스끼리 계층 구조를 가짐

- 상호배타적 관계
	- 두 테이블 중 하나만 가능한 관계
	- ex. 주문 엔터티에는 개인 또는 법인번호 중 하나만 상속될 수 있음

# 트랜잭션
- 하나의 연속적인 업무 단위
- 트랜잭션에 의한 관계는 필수적인 관계 형태를 가짐
- 일련의 과정은 동시에 수행되어야 함
	- 모두 성공하거나 모두 취소 (All or Nothing)
	- 각각의 과정이 서로 독립적으로 발생하면 안 됨
	  -> 각각의 INSERT문 X
	- 부분 commit 불가
	  -> 동시 COMMIT 또는 ROLLBACK 처리
- 두 엔터티의 관계가 필수적일 때 하나의 트랜잭션 형성
	- 독립적 수행이 가능하면 선택적 관계
- IE 표기법
	- 필수적 관계: 원을 그리지 않음
	- 선택적 관계: 관계선 끝에 원을 그림
- 바커표기법
	- 필수적 관계: 관계선을 실선으로 표기
	- 선택적 관계: 관계선을 점선으로 표기

# NULL
- 아직 정해지지 않은 값
- 0, ""과는 다름
- NULL을 포함한 연산 결과는 항상 NULL
	- NULL을 사전에 치환한 후 연산 필요
- 집계함수는 NULL을 제외한 연산 결과 리턴
	- count, sum, avg, min, max
- IE 표기법
	- NULL 허용여부를 알 수 없음
- 바커표기법
	- 속성 앞에 동그라미 -> NULL 허용 속성
