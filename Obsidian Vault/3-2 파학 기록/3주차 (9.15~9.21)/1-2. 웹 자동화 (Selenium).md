## Selenium 환경 설정 및 XPath 이해

1. Selenium 설치
	* `pip install selenium`

2. 웹 드라이버(Web Driver) 설치 방법
	* 브라우저를 자동으로 제어하기 위한 필수 도구
	* 크롬 → ChromeDriver, 파이어폭스 → GeckoDriver 등
	- 설치 방법 3가지:
		1. webdriver-manager 사용 (외부 패키지)
			* `pip install webdriver-manager`
			* 코드에서 자동 다운로드 및 버전 관리
		2. Selenium Manager 사용 (Selenium 4.6+ 기본 제공)
			* `webdriver.Chrome()` 호출 시 자동으로 드라이버 설치·관리
		3. 수동 설치
			* 크롬 버전에 맞는 드라이버를 직접 다운로드
			* PATH에 등록하거나 코드에서 경로 직접 지정

3. XPath 개념
	* HTML 문서에서 원하는 요소를 선택하는 경로 언어
	* 기본 규칙
		* `/` : 한 단계 아래
		* `//` : 전체 탐색
		* `*` : 모든 요소
		* `[@속성="값"]` : 특정 속성 값으로 요소 선택
	* 예시
		* `/html/body/div/h1`
		* `//*[@id="title"]`

4. XPath 확인 방법
	* 브라우저 개발자 도구 → 요소 우클릭 → Copy → Copy XPath / Copy full XPath

## Selenium으로 웹 브라우저 제어하기

1. 브라우저 실행 및 종료
    - `webdriver.Chrome()`으로 크롬 실행
    - `driver.get(url)`로 사이트 접속
    - `driver.quit()`으로 종료 (안 하면 브라우저 창이 남음)

2. 창 크기 조정
    - 실행 후 변경: `set_window_size(width, height)`, `maximize_window()`
    - 실행 시 미리 설정: `ChromeOptions`의 `add_argument("window-size=800,600")` 또는 `add_argument("--start-fullscreen")`

3. 실행 지연
    - `time.sleep(sec)`으로 일정 시간 대기 (페이지 확인이나 로드 대기용)

4. 요소 찾기 (find_element / find_elements)
    - `By.ID`, `By.CLASS_NAME`, `By.NAME`, `By.TAG_NAME`, `By.LINK_TEXT`,  
        `By.PARTIAL_LINK_TEXT`, `By.XPATH`, `By.CSS_SELECTOR` 등 기준 제공
    - `find_element`: 조건에 맞는 첫 번째 요소 반환 (없으면 오류)
    - `find_elements`: 조건에 맞는 모든 요소 반환 (없으면 빈 리스트)

5. 대기 방법
    - 명시적 대기 (Explicit Wait)
        - `WebDriverWait(driver, 10).until(조건)`
        - 상황별 조건 지원:
	        - `presence_of_element_located`: 웹 페이지에 해당 요소가 존재하는지 확인할 때까지 대기
	        - `visibility_of_element_located`: 해당 요소가 사용자에게 보이고, 실제로 클릭 가능하거나 상호작용 가능할 때까지 대기
	        - `element_to_be_clickable`: 해당 요소가 클릭 가능한 상태가 될 때까지 대기
        - 조건 만족 즉시 진행
    - 암시적 대기 (Implicit Wait)
        - `driver.implicitly_wait(10)`
        - 전역 적용, 요소 검색 시 최대 지정 초 동안 대기

6. time.sleep vs 명시적/암시적 대기
    - `sleep`: 무조건 고정 시간 대기 → 간단하지만 비효율적일 수 있음
    - 명시적/암시적: 조건 충족 시 즉시 진행 → 효율적이고 권장

## Selenium으로 웹 요소와 상호작용하기

1. 키보드 입력
	- 입력 필드 찾기: `element = driver.find_element(By.속성, "속성값")`
	- 기본 입력: `element.send_keys("텍스트")`
	- 입력 전 초기화: `element.clear()` 후 `send_keys()`
	- 제출: `element.submit()` 또는 `send_keys(Keys.ENTER)`
	- 특수/조합 키: `from selenium.webdriver.common.keys import Keys` 후 `send_keys(Keys.ENTER)`, `send_keys(Keys.CONTROL, 'c')` 등

2. 입력값을 콘솔에서 받기
	- `query = input("프롬프트")`로 사용자 입력 대기 → 입력값을 `send_keys(query)`로 전달

3. 마우스 동작
	- 클릭할 요소 찾기: `element = driver.find_element(By.속성, "속성값")`
	- 기본 클릭: `element.click()`
	- 드래그 앤 드롭: `ActionChains(driver).drag_and_drop(source, target).perform()`
	- 마우스 오버: `ActionChains(driver).move_to_element(element).perform()`

4. 페이지 스크롤
	- 좌표로 이동: `driver.execute_script("window.scrollTo(0, document.body.scrollHeight)")`
	- 특정 요소로 이동:  
    `driver.execute_script("arguments[0].scrollIntoView({behavior:'smooth', block:'center', inline:'center'})", element)`

5. 창/탭 전환
	- 핸들 목록: `handles = driver.window_handles`
	- 전환: `driver.switch_to.window(handles[i])`
	- 새 탭을 연 뒤 잠시 대기(예: `time.sleep(2)`) 후 전환하면 안정적

6. 스크린샷
	- 전체 페이지: `driver.save_screenshot("full.png")`
	- 특정 요소: `element.screenshot("elem.png")` (Selenium 4+)

7. 헤드리스 모드
	- 설정:
		`from selenium.webdriver.chrome.options import Options`
		`opts = Options()`
		`opts.add_argument("--headless")  # 또는 opts.headless = True`
		`driver = webdriver.Chrome(options=opts)`
	- 눈에 보이는 창 없이 빠르고 가볍게 실행 가능. 일부 사이트에서 동작 차이 있을 수 있어 예외 처리와 디버깅 로그가 중요.