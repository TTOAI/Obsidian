## **0단계. 초기 진입 및 토큰 확인**

0-1. 브라우저가 홈페이지 URL에 접근하면, 프론트엔드는 `accessToken`과 `refreshToken`의 존재 여부를 확인한다.  
- 두 토큰이 모두 존재할 경우, 프론트엔드는 `accessToken`의 유효성을 검사한다.  
- `accessToken`이 유효할 경우, 백엔드의 `/user/me` API를 호출하여 유저 정보를 요청한다.  
- `accessToken`이 만료되었을 경우, `refreshToken`을 이용해 `/auth/reissue` API를 호출하여 새로운 `accessToken`을 재발급받는다.  
- 백엔드는 토큰을 검증하고, 로그인 이력이 있는 유저일 경우 “기존 로그인 유저”임을 프론트엔드에 알리고 홈 화면으로 이동시킨다.  
- 로그인 이력이 없는 유저일 경우 “신규 유저”임을 알리고, 프론트엔드가 온보딩 페이지로 이동하여 추가 정보를 입력받도록 한다.

0-2. 두 토큰이 존재하지 않을 경우, 프론트엔드는 서비스의 **로그인 화면**을 표시한다.  
- 사용자가 **“Google 로그인” 버튼**을 클릭하면, 프론트엔드는 백엔드의 `/auth/google/login` 경로로 리디렉션한다.  
- 백엔드는 해당 요청을 받아 구글 인증 서버 로그인 페이지로 리디렉션한다.

---
## **1단계. 로그인 성공 및 임시 토큰 발급**

백엔드는 구글 인증 성공 후 프론트엔드로 리디렉션하면서, 단기 유효기간을 가진 **임시 토큰(JWT)** 을 `HttpOnly`, `Secure`, `SameSite=None` 속성을 가진 **쿠키**에 담아 전달한다.

---
## **2단계. 임시 토큰 검증 및 실제 인증 토큰 발급**

프론트엔드는 쿠키에 포함된 임시 토큰을 이용해 `/user/me` API를 호출하여 유저 정보를 요청한다.  
요청 시 `credentials: 'include'` 옵션을 사용하여 쿠키를 자동으로 포함한다.  
- 백엔드는 임시 토큰을 검증하고, 유저 정보를 확인한 뒤 다음의 두 토큰을 발급한다.  
- **Access Token (JWT)**: 짧은 유효기간을 가지며, 이후 API 요청 시 `Authorization` 헤더에 포함되어 사용된다.  
- **Refresh Token (JWT)**: 장기 유효기간을 가지며, `HttpOnly` 쿠키에 저장되어 자동으로 백엔드에 전송된다.  
- 백엔드는 로그인 이력이 있는 유저일 경우 “기존 로그인 유저”임을 프론트엔드에 알리고 홈 화면으로 이동시킨다.  
- 로그인 이력이 없는 유저일 경우 “신규 유저”임을 알리고, 프론트엔드가 온보딩 페이지로 이동하여 추가 정보를 입력받도록 한다.

---
## **3단계. 프론트엔드 라우팅 및 온보딩 처리**

프론트엔드는 응답을 확인하여 다음과 같이 처리한다.
- **신규 유저**: 온보딩 페이지로 이동하여 추가 정보를 입력받은 뒤, 입력값과 `accessToken`을 함께 백엔드로 전달한다.
- **기존 유저**: 홈 화면으로 즉시 이동한다.

---
## **4단계. 백엔드 신규 유저 등록 처리**

백엔드는 신규 유저의 추가 정보를 저장하고, “최초 로그인” 이력을 데이터베이스에 기록한다.