
### 버전 맞추기

- KoBERT 레포지토리 확인
```
accelerate
datasets
gluonnlp >= 0.6.0, <=0.10.0
mxnet >= 1.4.0, <=1.7.0.post2
onnxruntime
protobuf
sentencepiece >= 0.1.6, <=0.1.96
torch
transformers

===
kobert_hf  -> 얘가 좀 더 엄격함
===
torch >= 1.8.1
transformers >= 4.8.2
sentencepiece >= 0.1.91

=============================
Colab에 원래 있음

Name: torch
Version: 2.8.0+cu126

Name: torchvision
Version: 0.23.0+cu126

Name: transformers
Version: 4.57.1

Name: scikit-learn
Version: 1.6.1

Name: tqdm
Version: 4.67.1
=============================

numpy==1.26.4

Name: sentencepiece
Version: 0.1.96

Name: mxnet
Version: 1.7.0.post2

Name: gluonnlp
Version: 0.10.0

Name: onnxruntime
Version: 1.23.2
```

### 설치해야 하는 것
```bash
pip install "git+https://github.com/SKTBrain/KoBERT.git"

pip install "git+https://github.com/SKTBrain/KoBERT.git#egg=kobert_tokenizer&subdirectory=kobert_hf"

pip install -q boto3
```


### 로컬 WSL Ubuntu에서 도커 이미지 빌드

```
cmake --version
pkg-config --version

gcc --version
g++ --version
make --version

dpkg -l | grep -E "cmake|pkg-config|build-essential"
```

```
sudo apt update
sudo apt install -y cmake pkg-config build-essential
```

### 버전 충돌

- kobert 라이브러리는 `mxnet==1.7.0.post2`와 `gluonnlp==0.10.0` 필요
- `mxnet==1.7.0.post2`와 `gluonnlp==0.10.0`은 2020~2021년 버전으로  당시 NumPy 1.x를 기준으로 개발됨
- `mxnet`이 `np.bool`을 사용하고 있는데, NumPy 2.0 이후엔 `np.bool`이 완전히 제거됨
- MXNet이 지원하는 마지막 NumPy 버전은 **1.23.x** 또는 **1.24.x**
- 그런데 `numpy==1.24.4`는 Python 3.8~3.11까지만 wheel 제공
- Python 3.11 이하 버전을 사용하는 virtualenv 만들기

- miniconda 설치 후 생성
```
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh

bash Miniconda3-latest-Linux-x86_64.sh

source ~/.bashrc

conda --version

conda create -n imfact-inferer python=3.10

conda env list

conda activate imfact-inferer
```

```shell
pip install "git+https://github.com/SKTBrain/KoBERT.git"

pip install "git+https://github.com/SKTBrain/KoBERT.git#egg=kobert_tokenizer&subdirectory=kobert_hf"

pip install numpy==1.23.5

pip install boto3==1.37.38
```
